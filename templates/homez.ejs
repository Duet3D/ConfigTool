; homez.g
; called to home the Z axis
;
; generated by RepRapFirmware Configuration Tool on <%- (new Date()).toString() %>
G91 ; relative positioning
G1 Z<%- template.z_dive_height %> F<%- template.travel_speed * 60 %> S2 ; lift Z relative to current position
<% if (template.drives[2].endstop_type != 3) {
  var travelToZ = Math.abs(template.geometry.mins[2]) + Math.abs(template.geometry.maxes[2]) + 5;
  var travelZDirection = "up";
  if (template.drives[2].endstop_location == 1) {
    travelZDirection = "down";
    travelToZ *= -1;
  } -%>
G1 S1 Z<%- travelToZ %> F<%- template.homing_speed_fast * 60 %> ; move Z <%- travelZDirection %> until the endstop is triggered
G92 Z<%- template.geometry.mins[2] %> ; set Z position to axis minimum (you may want to adjust this)
<% } else { -%>
G90 ; absolute positioning
G1 X<%- template.probe.points[0].x - template.probe.x_offset %> Y<%- template.probe.points[0].y - template.probe.y_offset %> F<%- template.travel_speed * 60 %> ; go to first probe point
G30 ; home Z by probing the bed
<% } -%>

; Uncomment the following lines to lift Z after probing
;G91 ; relative positioning
;G1 S2 Z<%- template.z_dive_height %> F<%- template.travel_speed %> ; lift Z relative to current position
;G90 ; absolute positioning
