<%  if (!preview) { -%>
; runonce.g
; called after config.g. As soon as this file has finished, it is automatically deleted!
;
; generated by RepRapFirmware Configuration Tool v<%- version %> on <%- (new Date()).toString() %>

<%  }
    if (model.sbc === null) {
        if (model.network.interfaces.some(iface => iface.type === NetworkInterfaceType.wifi)) { -%>
M552 S0 ; disable network
G4 P500 ; wait half a second
M552 S1 ; enable network
G4 P1000 ; wait a second
<%          if (template.network.dhcp) { -%>
M587 <%- params({
    S: template.network.ssid,
    P: template.network.ssid_password
}) -%> ; configure WiFi using DHCP
<%          } else { -%>
M587 <%- params({
    S: template.network.ssid,
    P: template.network.ssid_password,
    I: template.network.ip,
    J: template.network.gateway,
    K: template.network.netmask
}) -%> ; configure WiFi using static IP address
<%          } -%>
M552 S1 ; enable network
<%      } else { -%>
; No content in this file
<%      }
    } else { -%>
G4 S4 ; wait a moment
M550 P<%- escape(model.network.name) -%> ; set hostname
<%  } -%>
